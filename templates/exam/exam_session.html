{% extends "base.html" %}
{% block title %}{{ exam.title }} - Ujian{% endblock %}
{% block content %}
<div class="max-w-xl mx-auto py-8">
    <h2 class="text-xl font-bold mb-4">{{ exam.title }}</h2>
    <form method="post" action="{% url 'submit_answer' exam.course.id session.id %}?q={{ question.id }}">
        {% csrf_token %}
        <input type="hidden" name="question_id" value="{{ question.id }}">
        <div class="mb-4">
            <div class="font-semibold mb-2">Soal: {{ question.text }}</div>
            {% if question.type == 'MULTIPLE_CHOICE' %}
                {% for option in options %}
                <div>
                    <label>
                        <input type="radio" name="selected_option" value="{{ option.id }}"
                            {% if answer and answer.selected_option and answer.selected_option.id == option.id %}checked{% endif %}>
                        {{ option.text }}
                    </label>
                </div>
                {% endfor %}
            {% elif question.type == 'ESSAY' %}
                <textarea name="text_answer" rows="4" class="w-full border rounded" required>{% if answer %}{{ answer.text_answer }}{% endif %}</textarea>
            {% endif %}
        </div>
        <div class="flex justify-between mt-6">
            {% if prev_id %}
                <a href="{% url 'exam_session' exam.course.id session.id %}?q={{ prev_id }}" class="bg-gray-300 text-gray-700 px-4 py-2 rounded">Previous</a>
            {% else %}
                <span></span>
            {% endif %}
            {% if next_id %}
                <button type="submit" name="next_q" value="{{ next_id }}" class="bg-cyan-600 text-white px-4 py-2 rounded">Next</button>
            {% else %}
                <button type="submit" name="finish" value="1" class="bg-cyan-600 text-white px-4 py-2 rounded">Sumbit</button>
            {% endif %}
        </div>
    </form>
</div>
{% endblock %}